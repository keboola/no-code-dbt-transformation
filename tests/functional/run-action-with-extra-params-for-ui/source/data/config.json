{
  "authorization": {
    "workspace": {
      "host": "%env(string:SNOWFLAKE_HOST)%",
      "warehouse": "%env(string:SNOWFLAKE_WAREHOUSE)%",
      "database": "%env(string:SNOWFLAKE_DATABASE)%",
      "schema": "%env(string:SNOWFLAKE_SCHEMA)%",
      "user": "%env(string:SNOWFLAKE_USER)%",
      "password": "%env(string:SNOWFLAKE_PASSWORD)%"
    }
  },
  "parameters": {
    "tables": {
      "in.c-Google_Insights.audience_overview": "in.c-Google_Insights.audience_overview"
    },
    "tableName": "audience_overview",
    "bucketId": "in.c-Google_Insights",
    "models": [
      "SELECT {{ dbt_utils.star(from=ref('%model%'), except=[\"language\"]) }}, REPLACE(\"language\", 'en-us', 'EN') as \"language\" FROM {{ ref('%model%') }}",
      "SELECT * FROM {{ ref('%model%') }} WHERE \"deviceCategory\" = 'desktop'",
      "SELECT count(\"id\") as \"count\" FROM {{ ref('%model%') }} GROUP BY \"city\""
    ],
    "operations": [
      {
        "id": "cleanAndFormat",
        "name": "Clean and Format Data",
        "icon": "arrows-rotate",
        "category": "Clean & Format",
        "code": "{{=<% %>=}}\n          SELECT {{ dbt_utils.star(from=ref(<% previousSource %>), except=[\"<% columnName %>\"]) }}, REPLACE(\"<% columnName %>\", '<% searchValue %>', '<% newValue %>') as \"<% columnName %>\" FROM {{ ref(<% previousSource %>) }}",
        "inputs": {
          "columnName": {
            "id": "columnName",
            "name": "Column Name",
            "type": "string"
          },
          "searchValue": {
            "id": "searchValue",
            "name": "Search Value",
            "type": "string"
          },
          "newValue": {
            "id": "newValue",
            "name": "New Value",
            "type": "string"
          }
        },
        "variables": {
          "columnName": "Name2",
          "searchValue": "dolor",
          "newValue": "sit",
          "previousSource": "'in.c-Google_Insights', 'audience_overview'"
        },
        "index": 0
      }
    ],
    "authorization": {
      "host": "%env(string:SNOWFLAKE_HOST)%",
      "warehouse": "%env(string:SNOWFLAKE_WAREHOUSE)%",
      "database": "%env(string:SNOWFLAKE_DATABASE)%",
      "schema": "%env(string:SNOWFLAKE_SCHEMA)%",
      "user": "%env(string:SNOWFLAKE_USER)%",
      "#password": "%env(string:SNOWFLAKE_PASSWORD)%"
    }
  }
}
